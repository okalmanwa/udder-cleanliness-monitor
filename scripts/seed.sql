-- Clear existing data
DELETE FROM examinations;
DELETE FROM udders;
DELETE FROM farms;

-- Reset sequences if they exist
ALTER SEQUENCE IF EXISTS farms_id_seq RESTART WITH 1;
ALTER SEQUENCE IF EXISTS udders_id_seq RESTART WITH 1;
ALTER SEQUENCE IF EXISTS examinations_id_seq RESTART WITH 1;

-- Insert sample farms
INSERT INTO farms (id, name, code) VALUES
  ('11111111-1111-1111-1111-111111111111', 'Green Valley Farm', 'GVF'),
  ('22222222-2222-2222-2222-222222222222', 'Sunny Meadows', 'SMD'),
  ('33333333-3333-3333-3333-333333333333', 'Happy Cows Dairy', 'HCD');

-- Insert sample udders (20 per farm)
INSERT INTO udders (id, farm_id, identifier, position) VALUES
  -- Farm 1 (20 udders)
  ('11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 'GVF-U1', 'LF'),
  ('11111111-1111-1111-1111-111111111112', '11111111-1111-1111-1111-111111111111', 'GVF-U2', 'RF'),
  ('11111111-1111-1111-1111-111111111113', '11111111-1111-1111-1111-111111111111', 'GVF-U3', 'LR'),
  ('11111111-1111-1111-1111-111111111114', '11111111-1111-1111-1111-111111111111', 'GVF-U4', 'RR'),
  ('11111111-1111-1111-1111-111111111115', '11111111-1111-1111-1111-111111111111', 'GVF-U5', 'LF'),
  ('11111111-1111-1111-1111-111111111116', '11111111-1111-1111-1111-111111111111', 'GVF-U6', 'RF'),
  ('11111111-1111-1111-1111-111111111117', '11111111-1111-1111-1111-111111111111', 'GVF-U7', 'LR'),
  ('11111111-1111-1111-1111-111111111118', '11111111-1111-1111-1111-111111111111', 'GVF-U8', 'RR'),
  ('11111111-1111-1111-1111-111111111119', '11111111-1111-1111-1111-111111111111', 'GVF-U9', 'LF'),
  ('11111111-1111-1111-1111-111111111120', '11111111-1111-1111-1111-111111111111', 'GVF-U10', 'RF'),
  ('11111111-1111-1111-1111-111111111121', '11111111-1111-1111-1111-111111111111', 'GVF-U11', 'LR'),
  ('11111111-1111-1111-1111-111111111122', '11111111-1111-1111-1111-111111111111', 'GVF-U12', 'RR'),
  ('11111111-1111-1111-1111-111111111123', '11111111-1111-1111-1111-111111111111', 'GVF-U13', 'LF'),
  ('11111111-1111-1111-1111-111111111124', '11111111-1111-1111-1111-111111111111', 'GVF-U14', 'RF'),
  ('11111111-1111-1111-1111-111111111125', '11111111-1111-1111-1111-111111111111', 'GVF-U15', 'LR'),
  ('11111111-1111-1111-1111-111111111126', '11111111-1111-1111-1111-111111111111', 'GVF-U16', 'RR'),
  ('11111111-1111-1111-1111-111111111127', '11111111-1111-1111-1111-111111111111', 'GVF-U17', 'LF'),
  ('11111111-1111-1111-1111-111111111128', '11111111-1111-1111-1111-111111111111', 'GVF-U18', 'RF'),
  ('11111111-1111-1111-1111-111111111129', '11111111-1111-1111-1111-111111111111', 'GVF-U19', 'LR'),
  ('11111111-1111-1111-1111-111111111130', '11111111-1111-1111-1111-111111111111', 'GVF-U20', 'RR'),
  -- Farm 2 (20 udders)
  ('22222222-2222-2222-2222-222222222221', '22222222-2222-2222-2222-222222222222', 'SMD-U1', 'LF'),
  ('22222222-2222-2222-2222-222222222222', '22222222-2222-2222-2222-222222222222', 'SMD-U2', 'RF'),
  ('22222222-2222-2222-2222-222222222223', '22222222-2222-2222-2222-222222222222', 'SMD-U3', 'LR'),
  ('22222222-2222-2222-2222-222222222224', '22222222-2222-2222-2222-222222222222', 'SMD-U4', 'RR'),
  ('22222222-2222-2222-2222-222222222225', '22222222-2222-2222-2222-222222222222', 'SMD-U5', 'LF'),
  ('22222222-2222-2222-2222-222222222226', '22222222-2222-2222-2222-222222222222', 'SMD-U6', 'RF'),
  ('22222222-2222-2222-2222-222222222227', '22222222-2222-2222-2222-222222222222', 'SMD-U7', 'LR'),
  ('22222222-2222-2222-2222-222222222228', '22222222-2222-2222-2222-222222222222', 'SMD-U8', 'RR'),
  ('22222222-2222-2222-2222-222222222229', '22222222-2222-2222-2222-222222222222', 'SMD-U9', 'LF'),
  ('22222222-2222-2222-2222-222222222230', '22222222-2222-2222-2222-222222222222', 'SMD-U10', 'RF'),
  ('22222222-2222-2222-2222-222222222231', '22222222-2222-2222-2222-222222222222', 'SMD-U11', 'LR'),
  ('22222222-2222-2222-2222-222222222232', '22222222-2222-2222-2222-222222222222', 'SMD-U12', 'RR'),
  ('22222222-2222-2222-2222-222222222233', '22222222-2222-2222-2222-222222222222', 'SMD-U13', 'LF'),
  ('22222222-2222-2222-2222-222222222234', '22222222-2222-2222-2222-222222222222', 'SMD-U14', 'RF'),
  ('22222222-2222-2222-2222-222222222235', '22222222-2222-2222-2222-222222222222', 'SMD-U15', 'LR'),
  ('22222222-2222-2222-2222-222222222236', '22222222-2222-2222-2222-222222222222', 'SMD-U16', 'RR'),
  ('22222222-2222-2222-2222-222222222237', '22222222-2222-2222-2222-222222222222', 'SMD-U17', 'LF'),
  ('22222222-2222-2222-2222-222222222238', '22222222-2222-2222-2222-222222222222', 'SMD-U18', 'RF'),
  ('22222222-2222-2222-2222-222222222239', '22222222-2222-2222-2222-222222222222', 'SMD-U19', 'LR'),
  ('22222222-2222-2222-2222-222222222240', '22222222-2222-2222-2222-222222222222', 'SMD-U20', 'RR'),
  -- Farm 3 (20 udders)
  ('33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', 'HCD-U1', 'LF'),
  ('33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333', 'HCD-U2', 'RF'),
  ('33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333333', 'HCD-U3', 'LR'),
  ('33333333-3333-3333-3333-333333333334', '33333333-3333-3333-3333-333333333333', 'HCD-U4', 'RR'),
  ('33333333-3333-3333-3333-333333333335', '33333333-3333-3333-3333-333333333333', 'HCD-U5', 'LF'),
  ('33333333-3333-3333-3333-333333333336', '33333333-3333-3333-3333-333333333333', 'HCD-U6', 'RF'),
  ('33333333-3333-3333-3333-333333333337', '33333333-3333-3333-3333-333333333333', 'HCD-U7', 'LR'),
  ('33333333-3333-3333-3333-333333333338', '33333333-3333-3333-3333-333333333333', 'HCD-U8', 'RR'),
  ('33333333-3333-3333-3333-333333333339', '33333333-3333-3333-3333-333333333333', 'HCD-U9', 'LF'),
  ('33333333-3333-3333-3333-333333333340', '33333333-3333-3333-3333-333333333333', 'HCD-U10', 'RF'),
  ('33333333-3333-3333-3333-333333333341', '33333333-3333-3333-3333-333333333333', 'HCD-U11', 'LR'),
  ('33333333-3333-3333-3333-333333333342', '33333333-3333-3333-3333-333333333333', 'HCD-U12', 'RR'),
  ('33333333-3333-3333-3333-333333333343', '33333333-3333-3333-3333-333333333333', 'HCD-U13', 'LF'),
  ('33333333-3333-3333-3333-333333333344', '33333333-3333-3333-3333-333333333333', 'HCD-U14', 'RF'),
  ('33333333-3333-3333-3333-333333333345', '33333333-3333-3333-3333-333333333333', 'HCD-U15', 'LR'),
  ('33333333-3333-3333-3333-333333333346', '33333333-3333-3333-3333-333333333333', 'HCD-U16', 'RR'),
  ('33333333-3333-3333-3333-333333333347', '33333333-3333-3333-3333-333333333333', 'HCD-U17', 'LF'),
  ('33333333-3333-3333-3333-333333333348', '33333333-3333-3333-3333-333333333333', 'HCD-U18', 'RF'),
  ('33333333-3333-3333-3333-333333333349', '33333333-3333-3333-3333-333333333333', 'HCD-U19', 'LR'),
  ('33333333-3333-3333-3333-333333333350', '33333333-3333-3333-3333-333333333333', 'HCD-U20', 'RR');

-- Function to generate random score (1-4)
CREATE OR REPLACE FUNCTION random_score() RETURNS integer AS $$
BEGIN
  RETURN floor(random() * 4 + 1)::integer;
END;
$$ LANGUAGE plpgsql;

-- Insert 100 examination records with varying dates
WITH dates AS (
  SELECT generate_series(
    CURRENT_DATE - INTERVAL '90 days',
    CURRENT_DATE,
    '1 day'::interval
  )::date AS exam_date
)
INSERT INTO examinations (id, udder_id, score, exam_timestamp, images)
SELECT 
  gen_random_uuid(),
  (CASE 
    WHEN random() < 0.33 THEN '11111111-1111-1111-1111-111111111111'::uuid
    WHEN random() < 0.66 THEN '22222222-2222-2222-2222-222222222222'::uuid
    ELSE '33333333-3333-3333-3333-333333333333'::uuid
  END),
  random_score(),
  exam_date + (random() * interval '1 day'),
  ARRAY[]::text[]
FROM dates
CROSS JOIN generate_series(1, 2) -- Generate 2 records per day
WHERE random() < 0.7 -- 70% chance to include each day
LIMIT 100; 